<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Simulation UE – Scénarios économiques, géopolitiques et projections politiques</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
  <link rel="stylesheet" href="../../../css2/styles.css">
</head>

<body>
<div id="app-main-content">
  <div class="carousel-container" id="carouselContainer">
    <div class="carousel" id="landing-carousel" aria-label="Présentation de la simulation">
      <div class="carousel-slide" data-slide="1" aria-labelledby="slide1-title" role="group" aria-roledescription="slide">
        <h2 id="slide1-title">Bienvenue dans la Simulation de Négociation Européenne</h2>
        <p>Plongez au cœur des grandes décisions européennes !</p>
        <p>Dans ce jeu de rôle immersif, incarnez un acteur clé de l'Union européenne et participez à la négociation de directives majeures. Testez votre capacité à trouver des compromis, à défendre vos intérêts et à faire avancer l'Europe sur des enjeux cruciaux : transition énergétique, sécurité, fiscalité, numérique, migration et bien plus encore.</p>
        <p><strong>Êtes-vous prêt à influencer l'avenir de l'Union ?</strong></p>
      </div>

      <div class="carousel-slide" data-slide="2" aria-labelledby="slide2-title" role="group" aria-roledescription="slide">
        <h2 id="slide2-title">Les acteurs de la négociation</h2>
        <p>La simulation réunit tous les grands acteurs du processus législatif européen :</p>
        <ul>
          <li><strong>Commission européenne</strong> : propose et pilote les directives.</li>
          <li><strong>États membres (Conseil)</strong> : défendent leurs intérêts nationaux et négocient les compromis.</li>
          <li><strong>Groupes parlementaires</strong> : portent la voix des citoyens et des sensibilités politiques.</li>
          <li><strong>Lobbies et société civile</strong> : influencent les débats et font entendre des intérêts sectoriels.</li>
        </ul>
        <p>À chaque tour, chaque acteur dispose de marges de manœuvre, d'objectifs et de limites propres. Saurez-vous comprendre leurs logiques et composer avec leurs contraintes ?</p>
      </div>

      <div class="carousel-slide" data-slide="3" aria-labelledby="slide3-title" role="group" aria-roledescription="slide">
        <h2 id="slide3-title">Les acteurs de la négociation</h2>

        <div class="group-input-area">
          <div class="input-group">
            <ul>
              <li>
                <label for="excelFile">Importer une liste d'élèves (Excel)</label>
                <input type="file" id="excelFile" accept=".xlsx" onchange="handleFile(event)">
              <li class="input-item">
                <h5>Ou générer manuellement</h5>
                <label for="numParticipants">Nombre de participants :</label>
                <input type="number" id="numParticipants" min="3" value="0">
              </li>
              <li class="input-item">
                <button id="generateGroupsBtn" onclick="allocateManualGroups()">Générer les groupes</button>
                <button id="downloadCsvBtn" class="download-btn" onclick="prepareAndDownloadGroupsCSV()" disabled>Télécharger CSV des groupes</button>
              </li>
            </ul>
          </div>
        </div>

        <div class="group-results-display" id="groupsContainer">
          <div class="group-square commission-display" id="commissionDisplay">
            <h3><img src="https://upload.wikimedia.org/wikipedia/fr/7/77/Commission_Europ%C3%A9enne_FR.svg" alt="Commission Icon" class="group-icon"> Commission Européenne</h3>
            <ul id="commissionMembers">
            </ul>
          </div>

          <div class="group-square states-display" id="statesDisplay">
            <h3><img src="https://upload.wikimedia.org/wikipedia/commons/0/07/Council_of_the_EU_and_European_Council.svg" alt="States Icon" class="group-icon"> États Membres</h3>
            <div class="sub-group-grid" id="statesMembers">
            </div>
          </div>

          <div class="group-square parties-display" id="partiesDisplay">
            <h3><img src="https://upload.wikimedia.org/wikipedia/commons/1/1e/European_Parliament_logo.svg" alt="Parties Icon" class="group-icon"> Partis Politiques</h3>
            <div class="sub-group-grid" id="partiesMembers">
            </div>
          </div>

          <div class="group-square lobbies-display" id="lobbiesDisplay">
            <h3><img src="https://upload.wikimedia.org/wikipedia/commons/f/f8/Emblem_of_the_Confederation_of_European_Business.svg" alt="Lobbies Icon" class="group-icon"> Lobbies</h3>
            <div class="sub-group-grid" id="lobbiesMembers">
            </div>
          </div>
        </div>
      </div>

      <div class="carousel-slide" data-slide="4" aria-labelledby="slide4-title" role="group" aria-roledescription="slide">
        <h2 id="slide4-title">Les enjeux de la simulation</h2>
        <p>Chaque directive touche à des enjeux stratégiques pour l'Europe :</p>
        <ul>
          <li>Croissance économique et innovation</li>
          <li>Justice sociale et réduction des inégalités</li>
          <li>Transition écologique et sécurité énergétique</li>
          <li>Souveraineté numérique et sécurité intérieure</li>
        </ul>
        <p>Vos choix d'amendements et de compromis auront un impact direct sur des indicateurs clés (PIB, inégalités, émissions de CO₂, bien-être, sécurité, etc.).</p>
        <p><strong>Saurez-vous équilibrer ambition, réalisme et consensus ?</strong></p>
      </div>

      <div class="carousel-slide" data-slide="5" aria-labelledby="slide5-title" role="group" aria-roledescription="slide">
        <h2 id="slide5-title">Sélection du scénario et de la directive</h2>
        <p>Sélectionnez le scénario de simulation et la directive sur laquelle vous souhaitez négocier...</p>

        <div class="four-column-layout"> <div class="scenario-column scenario-1" data-scenario-id="1">
          <h3>Scénario 1: Développement Durable</h3>
          <p>Accent sur la transition énergétique et la réduction des émissions de CO2.</p>
          <div class="table-container">
            <table id="scenario1Table" class="scenario-table">
              <thead>
              <tr><th>Directive</th><th>Type</th><th>Choisir</th></tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>
        </div>

          <div class="scenario-column scenario-2" data-scenario-id="2">
            <h3>Scénario 2: Stabilité Géopolitique</h3>
            <p>Accent sur la sécurité, la défense et les relations internationales.</p>
            <div class="table-container">
              <table id="scenario2Table" class="scenario-table">
                <thead>
                <tr><th>Directive</th><th>Type</th><th>Choisir</th></tr>
                </thead>
                <tbody>
                </tbody>
              </table>
            </div>
          </div>

          <div class="scenario-choice-panel panel-style"> <h3>Choix du Scénario</h3>
            <p>Sélectionnez ou tirez au sort un scénario pour commencer.</p>
            <div class="scenario-selection-controls"> <button class="select-scenario-btn" data-scenario-id="1">Sélectionner Scénario 1</button>
              <button class="select-scenario-btn" data-scenario-id="2">Sélectionner Scénario 2</button>
              <button id="drawScenarioBtn" class="draw-btn">Tirer au sort un scénario</button>
            </div>
          </div>

          <div class="random-selection-column panel-style"> <h3>Tirage au sort de la directive</h3>
            <p>Laissez le hasard décider de la directive.</p>
            <hr class="separator">
            <button id="drawDirectiveBtn" class="draw-btn" disabled>Tirer au sort la directive</button>
            <p class="info-text">Disponible une fois le scénario choisi ou tiré.</p>
          </div>

        </div> <button id="launchSimulationBtn" class="main-action-btn" disabled>Lancer la simulation</button>
      </div>

      <div class="carousel-nav" role="group" aria-label="Navigation du carrousel">
        <button class="carousel-btn prev" aria-label="Diapositive précédente">←</button>
        <div class="carousel-dots">
          <button class="carousel-dot active" data-slide="1" aria-label="Aller à la diapositive 1"></button>
          <button class="carousel-dot" data-slide="2" aria-label="Aller à la diapositive 2"></button>
          <button class="carousel-dot" data-slide="3" aria-label="Aller à la diapositive 3"></button>
          <button class="carousel-dot" data-slide="4" aria-label="Aller à la diapositive 4"></button>
          <button class="carousel-dot" data-slide="5" aria-label="Aller à la diapositive 5"></button>

        </div>
        <button class="carousel-btn next" aria-label="Diapositive suivante">→</button>
      </div>
    </div>
  </div>







  <div class="transition-container" id="transitionScreen"> <div class="transition-content-wrapper">
    <h1 class="transition-heading">Votre Simulation est Prête</h1>

    <div class="scenario-display">
      <h2 class="scenario-title" id="selected-scenario">Scénario Développement Durable</h2>
      <h3 class="directive-title" id="selected-directive">Directive sur la Transition Énergétique</h3>

      <div class="scenario-description">
        <p>Vous allez participer à la négociation d'une directive européenne majeure visant à accélérer la transition énergétique tout en maintenant la compétitivité économique.</p>
      </div>
    </div>


    <div class="loading-bar">
      <div class="loading-progress" id="loadingProgress"></div>
    </div>



    <div class="objectives-section">
      <h3>Objectifs Principaux :</h3>
      <ul class="objectives-list">
        <li>Réduire les émissions de CO₂ d'au moins 55% d'ici 2030</li>
        <li>Maintenir une croissance économique stable</li>
        <li>Préserver la cohésion sociale entre les États membres</li>
        <li>Assurer la sécurité énergétique de l'Union</li>
        <li>Trouver un équilibre entre régulation et innovation</li>
      </ul>
    </div>




  </div>

  </div>

  <div id="mainContent" class="main-content">
    <header>
      <!-- Vidéo d'arrière-plan -->
      <video autoplay muted loop id="header-video">
        <source src="../../../medias/video/Europa.mp4" type="video/mp4">
        Votre navigateur ne supporte pas la vidéo.
      </video>
      <!-- Fond blanc transparent -->
      <div class="header-overlay"></div>
      <h1>Simulation UE – Scénarios économiques, géopolitiques et projections politiques</h1>
      <div id="scenario-display" style="text-align: center; margin-bottom: 20px; font-size: 1.2em; color: #555;"></div>
      <nav>
        <button data-tab="euro-tab">Présentation des institutions européennes</button>
        <button data-tab="simulation-tab">Les objectifs de la simulation</button>
        <button data-tab="scenario-tab">Présentation des enjeux détaillés de la directive</button>
        <button data-tab="state-info-tab">Informations et stratégie par États</button>
        <button data-tab="parti-info-tab">Informations et stratégie par parti</button>
        <button data-tab="lobby-info-tab">Informations et stratégie des lobbies</button>
        <button data-tab="negociation-country-tab">Pistes de négociation par pays</button>
        <button data-tab="negociation-parti-tab">Pistes de négociation par parti</button>
        <button data-tab="negociation-lobby-tab">Pistes de négociation par lobby</button>
        <button data-tab="simulator-tab">Simulateur</button>
      </nav>
    </header>

    <!-- Conteneurs pour chaque onglet -->
    <div id="euro-tab" class="tab-section" style="display: none;">
      <p>Section en cours de développement : Présentation des institutions européennes</p>
    </div>

    <div id="simulation-tab" class="tab-section" style="display: none;">
      <p>Section en cours de développement : Objectifs de la simulation</p>
    </div>

    <div id="scenario-tab" class="tab-section" style="display: none;">
      <p>Section en cours de développement : Enjeux détaillés de la directive</p>
    </div>

    <div id="state-info-tab" class="tab-section" style="display: none;">
      <p>Section en cours de développement : Stratégie par États</p>
    </div>

    <div id="parti-info-tab" class="tab-section" style="display: none;">
      <p>Section en cours de développement : Stratégie par parti</p>
    </div>

    <div id="lobby-info-tab" class="tab-section" style="display: none;">
      <p>Section en cours de développement : Stratégie des lobbies</p>
    </div>

    <div id="negociation-country-tab" class="tab-section" style="display: none;">
      <p>Section en cours de développement : Négociation par pays</p>
    </div>

    <div id="negociation-parti-tab" class="tab-section" style="display: none;">
      <p>Section en cours de développement : Négociation par parti</p>
    </div>

    <div id="negociation-lobby-tab" class="tab-section" style="display: none;">
      <p>Section en cours de développement : Négociation par lobby</p>
    </div>

    <div id="simulator-tab" class="tab-section">
      <form id="paramForm">
        <div id="scenario1" class="params">
          <div class="param-block">
            <label class="tooltip">PIB UE (croissance % initiale):
              <span class="tooltiptext">
                                <b>Produit Intérieur Brut</b><br>
                                Mesure la croissance économique annuelle.<br>
                                Une valeur positive indique une expansion.<br>
                                Essentiel pour le niveau de vie et l'emploi.
                            </span>
            </label>
            <input type="number" id="pib_eu" min="0" max="4" step="0.1" value="2">
            <span class="desc"><b>0 %</b> : stagnation – <b>4 %</b> : forte croissance annuelle</span>
          </div>
          <div class="param-block">
            <label class="tooltip">Indice de Gini UE (0.2-0.6):
              <span class="tooltiptext">
                                <b>Mesure des inégalités</b><br>
                                0 = parfaite égalité, 1 = inégalité extrême.<br>
                                Impacte la cohésion sociale.<br>
                                Un équilibre entre croissance et équité est crucial.
                            </span>
            </label>
            <input type="number" id="gini_eu" min="0.2" max="0.6" step="0.01" value="0.3">
            <span class="desc"><b>0.2</b> : forte égalité – <b>0.6</b> : fortes inégalités</span>
          </div>
          <div class="param-block">
            <label class="tooltip">CO₂/hab UE (2-10 t):
              <span class="tooltiptext">
                                <b>Emissions carbone par habitant</b><br>
                                Mesure l'impact environnemental.<br>
                                Des valeurs élevées accélèrent le changement climatique.<br>
                                Objectif UE : réduire de 55% d'ici 2030.
                            </span>
            </label>
            <input type="number" id="co2_eu" min="2" max="10" step="0.1" value="4">
            <span class="desc"><b>2 t/hab</b> : bas carbone – <b>10 t/hab</b> : très élevé</span>
          </div>
          <div class="param-block">
            <label class="tooltip">VEB UE (0-100):
              <span class="tooltiptext">
                                <b>Vitalité Écosystémique et Biodiversité</b><br>
                                Mesure la santé des écosystèmes.<br>
                                Impacte la résilience climatique et la sécurité alimentaire.<br>
                                Un indicateur clé du développement durable.
                            </span>
            </label>
            <input type="number" id="veb_eu" min="0" max="100" step="1" value="80">
            <span class="desc"><b>0</b> : biodiversité dégradée – <b>100</b> : optimale</span>
          </div>
        </div>
        <div id="scenario2" class="params" style="display:none;">
          <div class="param-block">
            <label class="tooltip">Stabilité UE (Normandie, 0-100):
              <span class="tooltiptext">
                                <b>Indice de stabilité géopolitique</b><br>
                                Mesure la capacité à gérer les crises.<br>
                                Influencé par les conflits et la coopération.<br>
                                Essentiel pour la sécurité et l'influence globale.
                            </span>
            </label>
            <input type="number" id="normandie_eu" min="0" max="100" step="1" value="80">
            <span class="desc"><b>0</b> : instabilité majeure – <b>100</b> : stabilité totale</span>
          </div>
          <div class="param-block">
            <label class="tooltip">Démocratie UE (V-Dem, 0-1):
              <span class="tooltiptext">
                                <b>Indice démocratique (V-Dem)</b><br>
                                Évalue la qualité démocratique des institutions.<br>
                                Inclut les libertés civiles et l'État de droit.<br>
                                Fondement de la légitimité politique de l'UE.
                            </span>
            </label>
            <input type="number" id="vdem_eu" min="0" max="1" step="0.01" value="0.85">
            <span class="desc"><b>0</b> : autoritarisme – <b>1</b> : démocratie consolidée</span>
          </div>
          <div class="param-block">
            <label class="tooltip">Croissance UE (% initiale):
              <span class="tooltiptext">
                                <b>Taux de croissance économique</b><br>
                                Reflète la santé globale de l'économie.<br>
                                Impacte le chômage et les investissements.<br>
                                Clé pour le maintien du modèle social européen.
                            </span>
            </label>
            <input type="number" id="pib_growth_eu" min="-2" max="4" step="0.1" value="1.5">
            <span class="desc"><b>-2 %</b> : récession – <b>4 %</b> : forte croissance</span>
          </div>
          <div class="param-block">
            <label class="tooltip">IDH UE (0-1):
              <span class="tooltiptext">
                                <b>Indice de Développement Humain</b><br>
                                Combine espérance de vie, éducation et revenu.<br>
                                Mesure le bien-être au-delà du PIB.<br>
                                Objectif : maintenir un niveau très élevé (>0,8).
                            </span>
            </label>
            <input type="number" id="idh_eu" min="0" max="1" step="0.01" value="0.92">
            <span class="desc"><b>0</b> : très faible – <b>1</b> : optimal</span>
          </div>
        </div>
      </form>
      <div class="simulate">
        <button type="button" id="simulButton">Simuler</button>
      </div>
      <h2>Courbes européennes</h2>
      <div class="canvas-container"><canvas id="euChart"></canvas></div>
      <div id="succes"></div>
      <h2>Résultats par État</h2>
      <select id="countrySelect" class="countrySelect">
        <option value="DE">Allemagne</option>
        <option value="FR">France</option>
        <option value="PL">Pologne</option>
        <option value="IT">Italie</option>
        <option value="SE">Suède</option>
        <option value="HU">Hongrie</option>
      </select>
      <div class="canvas-container"><canvas id="countryChart"></canvas></div>
      <div id="succesCountry"></div>
      <h2>Projections politiques par parti</h2>
      <div class="politique-container">
        <select id="partiSelect" class="countrySelect">
          <option value="PPE">PPE</option>
          <option value="SDE">S&D</option>
          <option value="RENEW">RE</option>
          <option value="VERT">Verts</option>
          <option value="ECR">ECR</option>
          <option value="GUE">GUE</option>
        </select>
        <div class="politique-metrics" style="margin:12px 0 20px 0;">
          <div class="metric"><span class="label">Satisfaction:</span> <span id="partiSatisfaction" class="value"></span></div>
          <div class="metric"><span class="label">Députés</span> <span id="partiMEPs" class="value"></span></div>
          <div class="metric"><span class="label">Conseil (% États):</span> <span id="partiConseil" class="value"></span></div>
          <div class="metric"><span class="label">Commissaires:</span> <span id="partiCommissaires" class="value"></span></div>
          <div class="metric"><span class="label">Influence Présidence:</span> <span id="partiPresidence" class="value"></span></div>

        </div>
        <div class="canvas-container"><canvas id="politiqueChart"></canvas></div>
        <div id="scoreVictoire" style="text-align:center;font-size:1.1em;margin-top:10px;color:#1b5e20;font-weight:600;"></div>
      </div>

      <h2>Dynamique des Lobbies</h2>
      <select id="lobbySelect" class="countrySelect">
        <option value="BIG_TECH">Big Tech</option>
        <option value="ENERGIES_FOSSILES">Énergies Fossiles</option>
        <option value="BANQUES_FINANCE">Banques & Finance</option>
        <option value="AGROCHIMIE">Agrochimie</option>
        <option value="PHARMA">Industrie Pharmaceutique</option>
        <option value="AUTOMOBILE">Industrie Automobile</option>
      </select>

      <div class="canvas-container">
        <canvas id="lobbyChart" width="800" height="400"></canvas>
      </div>

      <!-- L'élément pour afficher le score du lobby, sans styles inline -->
      <div id="lobbyScore">
        <!-- Le contenu sera ajouté par le JavaScript -->
      </div>
    </div>
    <!-- Conteneur principal du tableau de bord -->
  <!-- Bouton flottant pour ouvrir le tableau de bord -->
  <button id="dashboardToggle" class="floating-dashboard-btn" title="Mode Tableau de Bord">
    📊 Tableau de bord
  </button>

  <!-- Conteneur principal du tableau de bord -->
  <div id="dashboardContainer" class="dashboard-panel">
    <!-- Bouton de fermeture du tableau de bord -->
    <button id="closeDashboard" class="close-dashboard-btn">✕</button>

    <div class="dashboard-header">
      <h3>Tableau de Bord de la Simulation --- Scénario actuel : <span id="dashboardScenarioDisplay">Non défini</span></h3>


      <!-- Section d'ajustement des paramètres (inputs) -->
      <div class="dashboard-controls">
        <div class="param-input-row">
          <label for="param1Input" id="param1InputLabel">PIB (%):</label>
          <input type="number" id="param1Input" step="0.01">
        </div>
        <div class="param-input-row">
          <label for="param2Input" id="param2InputLabel">Gini :</label>
          <input type="number" id="param2Input" step="0.01">
        </div>
        <div class="param-input-row">
          <label for="param3Input" id="param3InputLabel">CO2 (tonnes):</label>
          <input type="number" id="param3Input" step="0.01">
        </div>
        <div class="param-input-row">
          <label for="param4Input" id="param4InputLabel">VEB (Mds €):</label>
          <input type="number" id="param4Input" step="1">
        </div>
        <button id="dbSimulateBtn" class="simulate-btn">Simuler</button>
      </div>


    </div>

    <!-- Conteneur pour les graphiques clonés -->
    <div id="clonedDashboardCharts" class="dashboard-charts-grid"></div>


    <!-- Full-screen modal du dashboard -->
    <div id="dashboardFullscreenModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:9999;justify-content:center;align-items:center">
      <div style="position:relative;width:90%;height:80%;background:#fff;border-radius:8px;padding:1rem">
        <button id="dashboardFullscreenCloseBtn"
                style="position:absolute;top:10px;right:15px;background:none;border:none;font-size:1.5rem;cursor:pointer">✕</button>
        <div id="fullscreenControls"
             style="position:absolute;top:10px;left:10px;z-index:10000;
            background:#fff;padding:8px 12px;border-radius:6px;
            box-shadow:0 2px 6px rgba(0,0,0,.25);
            display:flex;flex-direction:column;gap:6px;font-size:.85rem">
          <!-- les 4 inputs seront injectés dynamiquement -->
        </div>
        <canvas id="dashboardFullscreenCanvas" style="width:100%;height:100%"></canvas>
      </div>
    </div>
</div>
  </div>
</div>


<script src="main_old.js"></script>
</body>
</html>




