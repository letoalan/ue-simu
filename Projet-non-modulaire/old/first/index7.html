<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Simulation UE ‚Äì Sc√©narios √©conomiques, g√©opolitiques et projections politiques</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
  <link rel="stylesheet" href="../../../css2/styles.css">
</head>

<body>
<div id="app-main-content">
  <div class="carousel-container" id="carouselContainer">
    <div class="carousel" id="landing-carousel" aria-label="Pr√©sentation de la simulation">
      <div class="carousel-slide" data-slide="1" aria-labelledby="slide1-title" role="group" aria-roledescription="slide">
        <h2 id="slide1-title">Bienvenue dans la Simulation de N√©gociation Europ√©enne</h2>
        <p>Plongez au c≈ìur des grandes d√©cisions europ√©ennes !</p>
        <p>Dans ce jeu de r√¥le immersif, incarnez un acteur cl√© de l'Union europ√©enne et participez √† la n√©gociation de directives majeures. Testez votre capacit√© √† trouver des compromis, √† d√©fendre vos int√©r√™ts et √† faire avancer l'Europe sur des enjeux cruciaux : transition √©nerg√©tique, s√©curit√©, fiscalit√©, num√©rique, migration et bien plus encore.</p>
        <p><strong>√ätes-vous pr√™t √† influencer l'avenir de l'Union ?</strong></p>
      </div>

      <div class="carousel-slide" data-slide="2" aria-labelledby="slide2-title" role="group" aria-roledescription="slide">
        <h2 id="slide2-title">Les acteurs de la n√©gociation</h2>
        <p>La simulation r√©unit tous les grands acteurs du processus l√©gislatif europ√©en :</p>
        <ul>
          <li><strong>Commission europ√©enne</strong> : propose et pilote les directives.</li>
          <li><strong>√âtats membres (Conseil)</strong> : d√©fendent leurs int√©r√™ts nationaux et n√©gocient les compromis.</li>
          <li><strong>Groupes parlementaires</strong> : portent la voix des citoyens et des sensibilit√©s politiques.</li>
          <li><strong>Lobbies et soci√©t√© civile</strong> : influencent les d√©bats et font entendre des int√©r√™ts sectoriels.</li>
        </ul>
        <p>√Ä chaque tour, chaque acteur dispose de marges de man≈ìuvre, d'objectifs et de limites propres. Saurez-vous comprendre leurs logiques et composer avec leurs contraintes ?</p>
      </div>

      <div class="carousel-slide" data-slide="3" aria-labelledby="slide3-title" role="group" aria-roledescription="slide">
        <h2 id="slide3-title">Les acteurs de la n√©gociation</h2>

        <div class="group-input-area">
          <div class="input-group">
            <ul>
              <li>
                <label for="excelFile">Importer une liste d'√©l√®ves (Excel)</label>
                <input type="file" id="excelFile" accept=".xlsx" onchange="handleFile(event)">
              <li class="input-item">
                <h5>Ou g√©n√©rer manuellement</h5>
                <label for="numParticipants">Nombre de participants :</label>
                <input type="number" id="numParticipants" min="3" value="0">
              </li>
              <li class="input-item">
                <button id="generateGroupsBtn" onclick="allocateManualGroups()">G√©n√©rer les groupes</button>
                <button id="downloadCsvBtn" class="download-btn" onclick="prepareAndDownloadGroupsCSV()" disabled>T√©l√©charger CSV des groupes</button>
              </li>
            </ul>
          </div>
        </div>

        <div class="group-results-display" id="groupsContainer">
          <div class="group-square commission-display" id="commissionDisplay">
            <h3><img src="https://upload.wikimedia.org/wikipedia/fr/7/77/Commission_Europ%C3%A9enne_FR.svg" alt="Commission Icon" class="group-icon"> Commission Europ√©enne</h3>
            <ul id="commissionMembers">
            </ul>
          </div>

          <div class="group-square states-display" id="statesDisplay">
            <h3><img src="https://upload.wikimedia.org/wikipedia/commons/0/07/Council_of_the_EU_and_European_Council.svg" alt="States Icon" class="group-icon"> √âtats Membres</h3>
            <div class="sub-group-grid" id="statesMembers">
            </div>
          </div>

          <div class="group-square parties-display" id="partiesDisplay">
            <h3><img src="https://upload.wikimedia.org/wikipedia/commons/1/1e/European_Parliament_logo.svg" alt="Parties Icon" class="group-icon"> Partis Politiques</h3>
            <div class="sub-group-grid" id="partiesMembers">
            </div>
          </div>

          <div class="group-square lobbies-display" id="lobbiesDisplay">
            <h3><img src="https://upload.wikimedia.org/wikipedia/commons/f/f8/Emblem_of_the_Confederation_of_European_Business.svg" alt="Lobbies Icon" class="group-icon"> Lobbies</h3>
            <div class="sub-group-grid" id="lobbiesMembers">
            </div>
          </div>
        </div>
      </div>

      <div class="carousel-slide" data-slide="4" aria-labelledby="slide4-title" role="group" aria-roledescription="slide">
        <h2 id="slide4-title">Les enjeux de la simulation</h2>
        <p>Chaque directive touche √† des enjeux strat√©giques pour l'Europe :</p>
        <ul>
          <li>Croissance √©conomique et innovation</li>
          <li>Justice sociale et r√©duction des in√©galit√©s</li>
          <li>Transition √©cologique et s√©curit√© √©nerg√©tique</li>
          <li>Souverainet√© num√©rique et s√©curit√© int√©rieure</li>
        </ul>
        <p>Vos choix d'amendements et de compromis auront un impact direct sur des indicateurs cl√©s (PIB, in√©galit√©s, √©missions de CO‚ÇÇ, bien-√™tre, s√©curit√©, etc.).</p>
        <p><strong>Saurez-vous √©quilibrer ambition, r√©alisme et consensus ?</strong></p>
      </div>

      <div class="carousel-slide" data-slide="5" aria-labelledby="slide5-title" role="group" aria-roledescription="slide">
        <h2 id="slide5-title">S√©lection du sc√©nario et de la directive</h2>
        <p>S√©lectionnez le sc√©nario de simulation et la directive sur laquelle vous souhaitez n√©gocier...</p>

        <div class="four-column-layout"> <div class="scenario-column scenario-1" data-scenario-id="1">
          <h3>Sc√©nario 1: D√©veloppement Durable</h3>
          <p>Accent sur la transition √©nerg√©tique et la r√©duction des √©missions de CO2.</p>
          <div class="table-container">
            <table id="scenario1Table" class="scenario-table">
              <thead>
              <tr><th>Directive</th><th>Type</th><th>Choisir</th></tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>
        </div>

          <div class="scenario-column scenario-2" data-scenario-id="2">
            <h3>Sc√©nario 2: Stabilit√© G√©opolitique</h3>
            <p>Accent sur la s√©curit√©, la d√©fense et les relations internationales.</p>
            <div class="table-container">
              <table id="scenario2Table" class="scenario-table">
                <thead>
                <tr><th>Directive</th><th>Type</th><th>Choisir</th></tr>
                </thead>
                <tbody>
                </tbody>
              </table>
            </div>
          </div>

          <div class="scenario-choice-panel panel-style"> <h3>Choix du Sc√©nario</h3>
            <p>S√©lectionnez ou tirez au sort un sc√©nario pour commencer.</p>
            <div class="scenario-selection-controls"> <button class="select-scenario-btn" data-scenario-id="1">S√©lectionner Sc√©nario 1</button>
              <button class="select-scenario-btn" data-scenario-id="2">S√©lectionner Sc√©nario 2</button>
              <button id="drawScenarioBtn" class="draw-btn">Tirer au sort un sc√©nario</button>
            </div>
          </div>

          <div class="random-selection-column panel-style"> <h3>Tirage au sort de la directive</h3>
            <p>Laissez le hasard d√©cider de la directive.</p>
            <hr class="separator">
            <button id="drawDirectiveBtn" class="draw-btn" disabled>Tirer au sort la directive</button>
            <p class="info-text">Disponible une fois le sc√©nario choisi ou tir√©.</p>
          </div>

        </div> <button id="launchSimulationBtn" class="main-action-btn" disabled>Lancer la simulation</button>
      </div>

      <div class="carousel-nav" role="group" aria-label="Navigation du carrousel">
        <button class="carousel-btn prev" aria-label="Diapositive pr√©c√©dente">‚Üê</button>
        <div class="carousel-dots">
          <button class="carousel-dot active" data-slide="1" aria-label="Aller √† la diapositive 1"></button>
          <button class="carousel-dot" data-slide="2" aria-label="Aller √† la diapositive 2"></button>
          <button class="carousel-dot" data-slide="3" aria-label="Aller √† la diapositive 3"></button>
          <button class="carousel-dot" data-slide="4" aria-label="Aller √† la diapositive 4"></button>
          <button class="carousel-dot" data-slide="5" aria-label="Aller √† la diapositive 5"></button>

        </div>
        <button class="carousel-btn next" aria-label="Diapositive suivante">‚Üí</button>
      </div>
    </div>
  </div>







  <div class="transition-container" id="transitionScreen"> <div class="transition-content-wrapper">
    <h1 class="transition-heading">Votre Simulation est Pr√™te</h1>

    <div class="scenario-display">
      <h2 class="scenario-title" id="selected-scenario">Sc√©nario D√©veloppement Durable</h2>
      <h3 class="directive-title" id="selected-directive">Directive sur la Transition √ânerg√©tique</h3>

      <div class="scenario-description">
        <p>Vous allez participer √† la n√©gociation d'une directive europ√©enne majeure visant √† acc√©l√©rer la transition √©nerg√©tique tout en maintenant la comp√©titivit√© √©conomique.</p>
      </div>
    </div>


    <div class="loading-bar">
      <div class="loading-progress" id="loadingProgress"></div>
    </div>



    <div class="objectives-section">
      <h3>Objectifs Principaux :</h3>
      <ul class="objectives-list">
        <li>R√©duire les √©missions de CO‚ÇÇ d'au moins 55% d'ici 2030</li>
        <li>Maintenir une croissance √©conomique stable</li>
        <li>Pr√©server la coh√©sion sociale entre les √âtats membres</li>
        <li>Assurer la s√©curit√© √©nerg√©tique de l'Union</li>
        <li>Trouver un √©quilibre entre r√©gulation et innovation</li>
      </ul>
    </div>




  </div>

  </div>

  <div id="mainContent" class="main-content">
    <header>
      <!-- Vid√©o d'arri√®re-plan -->
      <video autoplay muted loop id="header-video">
        <source src="../../../medias/video/Europa.mp4" type="video/mp4">
        Votre navigateur ne supporte pas la vid√©o.
      </video>
      <!-- Fond blanc transparent -->
      <div class="header-overlay"></div>
      <h1>Simulation UE ‚Äì Sc√©narios √©conomiques, g√©opolitiques et projections politiques</h1>
      <div id="scenario-display" style="text-align: center; margin-bottom: 20px; font-size: 1.2em; color: #555;"></div>
      <nav>
        <button data-tab="euro-tab">Pr√©sentation des institutions europ√©ennes</button>
        <button data-tab="simulation-tab">Les objectifs de la simulation</button>
        <button data-tab="scenario-tab">Pr√©sentation des enjeux d√©taill√©s de la directive</button>
        <button data-tab="state-info-tab">Informations et strat√©gie par √âtats</button>
        <button data-tab="parti-info-tab">Informations et strat√©gie par parti</button>
        <button data-tab="lobby-info-tab">Informations et strat√©gie des lobbies</button>
        <button data-tab="negociation-country-tab">Pistes de n√©gociation par pays</button>
        <button data-tab="negociation-parti-tab">Pistes de n√©gociation par parti</button>
        <button data-tab="negociation-lobby-tab">Pistes de n√©gociation par lobby</button>
        <button data-tab="simulator-tab">Simulateur</button>
      </nav>
    </header>

    <!-- Conteneurs pour chaque onglet -->
    <div id="euro-tab" class="tab-section" style="display: none;">
      <p>Section en cours de d√©veloppement : Pr√©sentation des institutions europ√©ennes</p>
    </div>

    <div id="simulation-tab" class="tab-section" style="display: none;">
      <p>Section en cours de d√©veloppement : Objectifs de la simulation</p>
    </div>

    <div id="scenario-tab" class="tab-section" style="display: none;">
      <p>Section en cours de d√©veloppement : Enjeux d√©taill√©s de la directive</p>
    </div>

    <div id="state-info-tab" class="tab-section" style="display: none;">
      <p>Section en cours de d√©veloppement : Strat√©gie par √âtats</p>
    </div>

    <div id="parti-info-tab" class="tab-section" style="display: none;">
      <p>Section en cours de d√©veloppement : Strat√©gie par parti</p>
    </div>

    <div id="lobby-info-tab" class="tab-section" style="display: none;">
      <p>Section en cours de d√©veloppement : Strat√©gie des lobbies</p>
    </div>

    <div id="negociation-country-tab" class="tab-section" style="display: none;">
      <p>Section en cours de d√©veloppement : N√©gociation par pays</p>
    </div>

    <div id="negociation-parti-tab" class="tab-section" style="display: none;">
      <p>Section en cours de d√©veloppement : N√©gociation par parti</p>
    </div>

    <div id="negociation-lobby-tab" class="tab-section" style="display: none;">
      <p>Section en cours de d√©veloppement : N√©gociation par lobby</p>
    </div>

    <div id="simulator-tab" class="tab-section">
      <form id="paramForm">
        <div id="scenario1" class="params">
          <div class="param-block">
            <label class="tooltip">PIB UE (croissance % initiale):
              <span class="tooltiptext">
                                <b>Produit Int√©rieur Brut</b><br>
                                Mesure la croissance √©conomique annuelle.<br>
                                Une valeur positive indique une expansion.<br>
                                Essentiel pour le niveau de vie et l'emploi.
                            </span>
            </label>
            <input type="number" id="pib_eu" min="0" max="4" step="0.1" value="2">
            <span class="desc"><b>0‚ÄØ%</b>‚ÄØ: stagnation ‚Äì <b>4‚ÄØ%</b>‚ÄØ: forte croissance annuelle</span>
          </div>
          <div class="param-block">
            <label class="tooltip">Indice de Gini UE (0.2-0.6):
              <span class="tooltiptext">
                                <b>Mesure des in√©galit√©s</b><br>
                                0 = parfaite √©galit√©, 1 = in√©galit√© extr√™me.<br>
                                Impacte la coh√©sion sociale.<br>
                                Un √©quilibre entre croissance et √©quit√© est crucial.
                            </span>
            </label>
            <input type="number" id="gini_eu" min="0.2" max="0.6" step="0.01" value="0.3">
            <span class="desc"><b>0.2</b>‚ÄØ: forte √©galit√© ‚Äì <b>0.6</b>‚ÄØ: fortes in√©galit√©s</span>
          </div>
          <div class="param-block">
            <label class="tooltip">CO‚ÇÇ/hab UE (2-10 t):
              <span class="tooltiptext">
                                <b>Emissions carbone par habitant</b><br>
                                Mesure l'impact environnemental.<br>
                                Des valeurs √©lev√©es acc√©l√®rent le changement climatique.<br>
                                Objectif UE : r√©duire de 55% d'ici 2030.
                            </span>
            </label>
            <input type="number" id="co2_eu" min="2" max="10" step="0.1" value="4">
            <span class="desc"><b>2 t/hab</b>‚ÄØ: bas carbone ‚Äì <b>10 t/hab</b>‚ÄØ: tr√®s √©lev√©</span>
          </div>
          <div class="param-block">
            <label class="tooltip">VEB UE (0-100):
              <span class="tooltiptext">
                                <b>Vitalit√© √âcosyst√©mique et Biodiversit√©</b><br>
                                Mesure la sant√© des √©cosyst√®mes.<br>
                                Impacte la r√©silience climatique et la s√©curit√© alimentaire.<br>
                                Un indicateur cl√© du d√©veloppement durable.
                            </span>
            </label>
            <input type="number" id="veb_eu" min="0" max="100" step="1" value="80">
            <span class="desc"><b>0</b>‚ÄØ: biodiversit√© d√©grad√©e ‚Äì <b>100</b>‚ÄØ: optimale</span>
          </div>
        </div>
        <div id="scenario2" class="params" style="display:none;">
          <div class="param-block">
            <label class="tooltip">Stabilit√© UE (Normandie, 0-100):
              <span class="tooltiptext">
                                <b>Indice de stabilit√© g√©opolitique</b><br>
                                Mesure la capacit√© √† g√©rer les crises.<br>
                                Influenc√© par les conflits et la coop√©ration.<br>
                                Essentiel pour la s√©curit√© et l'influence globale.
                            </span>
            </label>
            <input type="number" id="normandie_eu" min="0" max="100" step="1" value="80">
            <span class="desc"><b>0</b>‚ÄØ: instabilit√© majeure ‚Äì <b>100</b>‚ÄØ: stabilit√© totale</span>
          </div>
          <div class="param-block">
            <label class="tooltip">D√©mocratie UE (V-Dem, 0-1):
              <span class="tooltiptext">
                                <b>Indice d√©mocratique (V-Dem)</b><br>
                                √âvalue la qualit√© d√©mocratique des institutions.<br>
                                Inclut les libert√©s civiles et l'√âtat de droit.<br>
                                Fondement de la l√©gitimit√© politique de l'UE.
                            </span>
            </label>
            <input type="number" id="vdem_eu" min="0" max="1" step="0.01" value="0.85">
            <span class="desc"><b>0</b>‚ÄØ: autoritarisme ‚Äì <b>1</b>‚ÄØ: d√©mocratie consolid√©e</span>
          </div>
          <div class="param-block">
            <label class="tooltip">Croissance UE (% initiale):
              <span class="tooltiptext">
                                <b>Taux de croissance √©conomique</b><br>
                                Refl√®te la sant√© globale de l'√©conomie.<br>
                                Impacte le ch√¥mage et les investissements.<br>
                                Cl√© pour le maintien du mod√®le social europ√©en.
                            </span>
            </label>
            <input type="number" id="pib_growth_eu" min="-2" max="4" step="0.1" value="1.5">
            <span class="desc"><b>-2‚ÄØ%</b>‚ÄØ: r√©cession ‚Äì <b>4‚ÄØ%</b>‚ÄØ: forte croissance</span>
          </div>
          <div class="param-block">
            <label class="tooltip">IDH UE (0-1):
              <span class="tooltiptext">
                                <b>Indice de D√©veloppement Humain</b><br>
                                Combine esp√©rance de vie, √©ducation et revenu.<br>
                                Mesure le bien-√™tre au-del√† du PIB.<br>
                                Objectif : maintenir un niveau tr√®s √©lev√© (>0,8).
                            </span>
            </label>
            <input type="number" id="idh_eu" min="0" max="1" step="0.01" value="0.92">
            <span class="desc"><b>0</b>‚ÄØ: tr√®s faible ‚Äì <b>1</b>‚ÄØ: optimal</span>
          </div>
        </div>
      </form>
      <div class="simulate">
        <button type="button" id="simulButton">Simuler</button>
      </div>
      <h2>Courbes europ√©ennes</h2>
      <div class="canvas-container"><canvas id="euChart"></canvas></div>
      <div id="succes"></div>
      <h2>R√©sultats par √âtat</h2>
      <select id="countrySelect" class="countrySelect">
        <option value="DE">Allemagne</option>
        <option value="FR">France</option>
        <option value="PL">Pologne</option>
        <option value="IT">Italie</option>
        <option value="SE">Su√®de</option>
        <option value="HU">Hongrie</option>
      </select>
      <div class="canvas-container"><canvas id="countryChart"></canvas></div>
      <div id="succesCountry"></div>
      <h2>Projections politiques par parti</h2>
      <div class="politique-container">
        <select id="partiSelect" class="countrySelect">
          <option value="PPE">PPE</option>
          <option value="SDE">S&D</option>
          <option value="RENEW">RE</option>
          <option value="VERT">Verts</option>
          <option value="ECR">ECR</option>
          <option value="GUE">GUE</option>
        </select>
        <div class="politique-metrics" style="margin:12px 0 20px 0;">
          <div class="metric"><span class="label">Satisfaction:</span> <span id="partiSatisfaction" class="value"></span></div>
          <div class="metric"><span class="label">D√©put√©s</span> <span id="partiMEPs" class="value"></span></div>
          <div class="metric"><span class="label">Conseil (% √âtats):</span> <span id="partiConseil" class="value"></span></div>
          <div class="metric"><span class="label">Commissaires:</span> <span id="partiCommissaires" class="value"></span></div>
          <div class="metric"><span class="label">Influence Pr√©sidence:</span> <span id="partiPresidence" class="value"></span></div>

        </div>
        <div class="canvas-container"><canvas id="politiqueChart"></canvas></div>
        <div id="scoreVictoire" style="text-align:center;font-size:1.1em;margin-top:10px;color:#1b5e20;font-weight:600;"></div>
      </div>

      <h2>Dynamique des Lobbies</h2>
      <select id="lobbySelect" class="countrySelect">
        <option value="BIG_TECH">Big Tech</option>
        <option value="ENERGIES_FOSSILES">√ânergies Fossiles</option>
        <option value="BANQUES_FINANCE">Banques & Finance</option>
        <option value="AGROCHIMIE">Agrochimie</option>
        <option value="PHARMA">Industrie Pharmaceutique</option>
        <option value="AUTOMOBILE">Industrie Automobile</option>
      </select>

      <div class="canvas-container">
        <canvas id="lobbyChart" width="800" height="400"></canvas>
      </div>

      <!-- L'√©l√©ment pour afficher le score du lobby, sans styles inline -->
      <div id="lobbyScore">
        <!-- Le contenu sera ajout√© par le JavaScript -->
      </div>
    </div>
    <!-- Conteneur principal du tableau de bord -->
  <!-- Bouton flottant pour ouvrir le tableau de bord -->
  <button id="dashboardToggle" class="floating-dashboard-btn" title="Mode Tableau de Bord">
    üìä Tableau de bord
  </button>

  <!-- Conteneur principal du tableau de bord -->
  <div id="dashboardContainer" class="dashboard-panel">
    <!-- Bouton de fermeture du tableau de bord -->
    <button id="closeDashboard" class="close-dashboard-btn">‚úï</button>

    <div class="dashboard-header">
      <h3>Tableau de Bord de la Simulation --- Sc√©nario actuel : <span id="dashboardScenarioDisplay">Non d√©fini</span></h3>


      <!-- Section d'ajustement des param√®tres (inputs) -->
      <div class="dashboard-controls">
        <div class="param-input-row">
          <label for="param1Input" id="param1InputLabel">PIB (%):</label>
          <input type="number" id="param1Input" step="0.01">
        </div>
        <div class="param-input-row">
          <label for="param2Input" id="param2InputLabel">Gini :</label>
          <input type="number" id="param2Input" step="0.01">
        </div>
        <div class="param-input-row">
          <label for="param3Input" id="param3InputLabel">CO2 (tonnes):</label>
          <input type="number" id="param3Input" step="0.01">
        </div>
        <div class="param-input-row">
          <label for="param4Input" id="param4InputLabel">VEB (Mds ‚Ç¨):</label>
          <input type="number" id="param4Input" step="1">
        </div>
        <button id="dbSimulateBtn" class="simulate-btn">Simuler</button>
      </div>


    </div>

    <!-- Conteneur pour les graphiques clon√©s -->
    <div id="clonedDashboardCharts" class="dashboard-charts-grid"></div>


    <!-- Full-screen modal du dashboard -->
    <div id="dashboardFullscreenModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:9999;justify-content:center;align-items:center">
      <div style="position:relative;width:90%;height:80%;background:#fff;border-radius:8px;padding:1rem">
        <button id="dashboardFullscreenCloseBtn"
                style="position:absolute;top:10px;right:15px;background:none;border:none;font-size:1.5rem;cursor:pointer">‚úï</button>
        <div id="fullscreenControls"
             style="position:absolute;top:10px;left:10px;z-index:10000;
            background:#fff;padding:8px 12px;border-radius:6px;
            box-shadow:0 2px 6px rgba(0,0,0,.25);
            display:flex;flex-direction:column;gap:6px;font-size:.85rem">
          <!-- les 4 inputs seront inject√©s dynamiquement -->
        </div>
        <canvas id="dashboardFullscreenCanvas" style="width:100%;height:100%"></canvas>
      </div>
    </div>
</div>
  </div>
</div>


<script src="main_old.js"></script>
</body>
</html>




